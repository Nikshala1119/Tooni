import React, { useEffect, useState } from 'react';

interface CartoonAvatarProps {
  volume: number;
  isTalking: boolean;
  isListening: boolean;
  isConnected: boolean;
  isMuted?: boolean;
}

const CartoonAvatar: React.FC<CartoonAvatarProps> = ({ volume, isTalking, isListening, isConnected, isMuted = false }) => {
  const [blink, setBlink] = useState(false);
  const [bodyBounce, setBodyBounce] = useState(0);

  // Random blinking
  useEffect(() => {
    const blinkInterval = setInterval(() => {
      setBlink(true);
      setTimeout(() => setBlink(false), 150);
    }, 2500 + Math.random() * 2000);
    return () => clearInterval(blinkInterval);
  }, []);

  // Subtle bounce when connected
  useEffect(() => {
    if (!isConnected) {
      setBodyBounce(0);
      return;
    }
    const bounceInterval = setInterval(() => {
      setBodyBounce(prev => (prev === 0 ? -3 : 0));
    }, 500);
    return () => clearInterval(bounceInterval);
  }, [isConnected]);

  // Mouth animation based on volume
  const mouthOpen = isTalking ? Math.max(5, Math.min(20, 5 + volume * 25)) : 0;

  return (
    <div className={`relative transition-all duration-300 ${!isConnected ? 'opacity-50 grayscale' : ''}`}>
      <div
        style={{
          transform: `translateY(${bodyBounce}px)`,
          transition: 'transform 0.25s ease-in-out',
          filter: isConnected ? 'drop-shadow(0 10px 25px rgba(0,0,0,0.2))' : 'none'
        }}
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="133.78 173.58 565.15 686.34"
          width="320"
          height="388"
        >
          {/* Hair */}
          <g transform="matrix(1, 0, 0, 1, -92.23, 10.17)">
            <path fill="#0b0a0b" d="M 559.5,163.5 C 559.918,164.222 560.584,164.722 561.5,165C 567.455,166.072 573.455,166.572 579.5,166.5C 587.966,168.359 596.632,170.026 605.5,171.5C 607.216,171.629 608.883,171.962 610.5,172.5C 612.503,174.982 615.169,175.982 618.5,175.5C 621.768,178.707 625.768,180.373 630.5,180.5C 632.553,180.402 634.22,181.069 635.5,182.5C 639.379,185.607 643.712,187.941 648.5,189.5C 650.784,189.975 652.784,190.975 654.5,192.5C 655.475,194.193 656.808,195.693 658.5,197C 662.601,198.749 666.601,200.583 670.5,202.5C 675.409,205.074 679.742,208.408 683.5,212.5C 683.894,214.71 685.227,216.043 687.5,216.5C 687.833,216.5 688.167,216.5 688.5,216.5C 689.5,219.5 691.5,221.5 694.5,222.5C 694.343,223.873 694.51,225.207 695,226.5C 697.4,228.415 699.9,230.081 702.5,231.5C 702.892,233.179 703.392,234.846 704,236.5C 708.245,239.934 712.078,243.6 715.5,247.5C 717.462,250.474 719.462,253.474 721.5,256.5C 722.283,261.399 724.617,265.399 728.5,268.5C 730.353,274.54 733.02,280.207 736.5,285.5C 736.752,289.327 738.085,292.66 740.5,295.5C 740.338,297.527 740.505,299.527 741,301.5C 742.645,307.083 744.812,312.416 747.5,317.5C 748.345,318.671 749.011,320.005 749.5,321.5C 749.5,322.167 749.5,322.833 749.5,323.5C 744.38,324.06 740.046,326.227 736.5,330C 731.968,335.362 727.301,340.528 722.5,345.5C 722.15,338.605 721.15,331.938 719.5,325.5C 717.895,311.186 715.228,297.186 711.5,283.5C 709.861,275.14 708.028,266.807 706,258.5C 703.366,252.728 699.866,247.561 695.5,243C 692.857,241.564 690.19,241.398 687.5,242.5C 680.825,255.169 670.825,258.836 657.5,253.5C 657.5,252.833 657.167,252.5 656.5,252.5C 650.163,242.652 642.496,233.819 633.5,226C 627.15,220.393 620.484,220.06 613.5,225C 604.993,230.419 596.66,236.086 588.5,242C 568.625,248.345 559.125,241.178 560,220.5C 568.944,208.774 580.444,200.607 594.5,196C 592.167,195 589.833,194 587.5,193C 568.886,190.173 550.219,188.006 531.5,186.5C 516.007,184.763 500.34,184.43 484.5,185.5C 490.161,190.827 495.827,196.16 501.5,201.5C 508.311,207.477 513.811,214.477 518,222.5C 522.063,236.742 516.897,244.742 502.5,246.5C 499.063,246.448 496.063,245.281 493.5,243C 485.486,234.253 477.819,225.253 470.5,216C 467.903,213.354 464.737,211.854 461,211.5C 457.937,212.881 455.104,214.714 452.5,217C 444.554,224.946 436.554,232.946 428.5,241C 425.146,243.032 421.813,245.032 418.5,247C 408.817,250.23 402.65,247.064 400,237.5C 399.253,234.076 399.42,230.743 400.5,227.5C 402.411,227.426 403.578,226.426 404,224.5C 404.497,222.19 404.663,219.857 404.5,217.5C 406.927,217.477 409.26,216.977 411.5,216C 414.904,212.419 418.237,208.919 421.5,205.5C 424.851,202.152 428.518,199.152 432.5,196.5C 437.139,195.118 439.972,192.118 441,187.5C 443.352,185.97 445.519,184.303 447.5,182.5C 455.71,179.73 463.71,176.397 471.5,172.5C 476.261,172.876 480.595,171.876 484.5,169.5C 492.512,168.966 500.179,167.299 507.5,164.5C 524.81,163.571 542.143,163.238 559.5,163.5 Z"/>
          </g>

          {/* Face/Skin */}
          <g transform="matrix(0.996, 0, 0, 0.968, -92.58, 12.91)">
            <path fill="#f7c6a9" d="M 531.5 186.5 C 550.219 188.006 568.886 190.173 587.5 193 C 589.833 194 592.167 195 594.5 196 C 580.444 200.607 568.944 208.774 560 220.5 C 559.125 241.178 568.625 248.345 588.5 242 C 596.66 236.086 604.993 230.419 613.5 225 C 620.484 220.06 627.092 220.46 633.5 226 C 640.785 232.298 647.543 239.975 657.394 252.947 C 624.618 237.271 595.224 242.491 571 269.5 C 566.493 275.514 563.327 282.181 561.5 289.5 C 561.833 290.167 562.167 290.833 562.5 291.5 C 567.577 282.353 573.41 273.686 580 265.5 C 588.995 255.585 600.161 249.752 613.5 248 C 627.538 245.396 640.538 247.729 652.5 255 C 661.694 261.527 669.527 269.361 676 278.5 C 680.286 286.683 684.119 295.017 687.5 303.5 C 688.912 297.815 688.079 292.482 685 287.5 C 679.581 278.993 673.914 270.66 668 262.5 C 665.407 259.457 662.24 257.29 658.5 256 C 657.748 255.329 648.699 242.428 648.785 241.432 C 662.11 246.768 672.11 243.101 678.785 230.432 C 681.475 229.33 692.857 241.564 695.5 243 C 699.866 247.561 703.366 252.728 706 258.5 C 708.028 266.807 709.861 275.14 711.5 283.5 C 712.669 295.522 714.169 307.522 716 319.5 C 716.684 330.519 716.518 341.519 715.5 352.5 C 714.378 354.052 713.878 355.718 714 357.5 C 716.692 353.323 719.525 349.323 722.5 345.5 C 727.301 340.528 731.968 335.362 736.5 330 C 740.046 326.227 744.38 324.06 749.5 323.5 C 756.518 323.507 762.518 326.007 767.5 331 C 783.182 349.181 792.182 370.347 794.5 394.5 C 794.129 401.071 792.795 407.404 790.5 413.5 C 789.033 410.742 788.367 411.075 788.5 414.5 C 785.112 413.835 784.112 414.835 785.5 417.5 C 784.908 420.836 782.908 422.669 779.5 423 C 778.382 424.074 777.382 425.24 776.5 426.5 C 766.005 429.967 755.338 430.3 744.5 427.5 C 741.371 425.978 738.037 425.145 734.5 425 C 734.167 424.667 733.833 424.333 733.5 424 C 734.5 423.667 735.5 423.333 736.5 423 C 730.654 422.687 724.988 421.854 719.5 420.5 C 710.151 417.674 702.151 419.841 695.5 427 C 691.167 427.333 686.833 427.667 682.5 428 C 679.986 428.881 677.986 430.381 676.5 432.5 C 674.143 432.337 671.81 432.503 669.5 433 C 667.461 435.374 665.128 437.374 662.5 439 C 657.5 439.333 652.5 439.667 647.5 440 C 643.038 446.231 637.038 449.231 629.5 449 C 621.938 453.939 613.604 456.939 604.5 458 C 591.88 462.66 579.213 467.327 566.5 472 C 544.919 476.395 523.586 481.729 502.5 488 C 488.585 489.564 474.918 492.23 461.5 496 C 438.242 498.897 415.242 497.563 392.5 492 C 379.626 487.896 366.959 483.229 354.5 478 C 347.669 472.666 341.002 467.166 334.5 461.5 C 330.606 457.392 326.939 453.059 323.5 448.5 C 320.158 443.82 317.325 438.82 315 433.5 C 311.916 424.347 309.749 415.014 308.5 405.5 C 308.388 385.942 313.555 367.942 324 351.5 C 327.185 347.108 330.352 342.774 333.5 338.5 C 337.991 334.509 342.324 330.343 346.5 326 C 349.065 323.92 351.732 322.087 354.5 320.5 C 358.985 319.675 362.819 317.675 366 314.5 C 374.273 313.947 380.606 310.28 385 303.5 C 385.333 291.167 385.667 278.833 386 266.5 C 386.638 259.011 387.804 251.677 389.5 244.5 C 392.528 236.779 396.361 229.446 401 222.5 C 401.718 221.549 402.551 221.383 403.5 222 C 402.361 223.78 401.361 225.614 400.5 227.5 C 399.42 230.743 399.253 234.076 400 237.5 C 402.65 247.064 408.817 250.23 418.5 247 C 421.813 245.032 425.146 243.032 428.5 241 C 436.554 232.946 444.554 224.946 452.5 217 C 455.104 214.714 457.937 212.881 461 211.5 C 464.737 211.854 467.903 213.354 470.5 216 C 477.819 225.253 485.486 234.253 493.5 243 C 496.063 245.281 499.063 246.448 502.5 246.5 C 516.897 244.742 522.063 236.742 518 222.5 C 513.811 214.477 508.311 207.477 501.5 201.5 C 501.611 200.883 501.944 200.383 502.5 200 C 500.635 197.117 498.635 194.283 496.5 191.5 C 494.322 190.343 492.322 189.01 490.5 187.5 C 504.202 186.78 517.869 186.446 531.5 186.5 Z"/>
          </g>

          {/* Eyebrow shadow */}
          <g transform="matrix(1, 0, 0, 1, -94.06, 9.25)">
            <path fill="#461613" d="M 656.5,252.5 C 657.167,252.5 657.5,252.833 657.5,253.5C 657.414,254.496 657.748,255.329 658.5,256C 662.24,257.29 665.407,259.457 668,262.5C 673.914,270.66 679.581,278.993 685,287.5C 688.079,292.482 688.912,297.815 687.5,303.5C 684.119,295.017 680.286,286.683 676,278.5C 669.527,269.361 661.694,261.527 652.5,255C 640.538,247.729 627.538,245.396 613.5,248C 600.161,249.752 588.995,255.585 580,265.5C 573.41,273.686 567.577,282.353 562.5,291.5C 562.167,290.833 561.833,290.167 561.5,289.5C 563.327,282.181 566.493,275.514 571,269.5C 595.224,242.491 623.724,236.824 656.5,252.5 Z"/>
          </g>

          {/* Second eyebrow shadow */}
          <g transform="matrix(1, 0, 0, 1, -92.23, 1.93)">
            <path fill="#471814" d="M 458.5,242.5 C 465.241,242.171 471.908,242.671 478.5,244C 498.245,252.077 511.411,266.244 518,286.5C 518.667,288.833 518.667,291.167 518,293.5C 514.763,287.468 512.096,281.135 510,274.5C 505.878,268.709 501.378,263.209 496.5,258C 487.742,250.786 477.742,246.619 466.5,245.5C 456.231,246.454 446.231,248.62 436.5,252C 431.833,255.333 427.167,258.667 422.5,262C 418.667,266.5 414.833,271 411,275.5C 407.622,282.084 405.622,289.084 405,296.5C 404.424,299.124 403.09,299.791 401,298.5C 400.206,292.978 400.873,287.645 403,282.5C 409.345,270.82 417.845,260.987 428.5,253C 438.04,247.955 448.04,244.455 458.5,242.5 Z"/>
          </g>

          {/* Left eyebrow outline */}
          <g transform="matrix(1, 0, 0, 1, -99.55, -11.79)">
            <path fill="#0c0b0c" d="M 502.5,291.5 C 505.462,294.964 508.629,298.297 512,301.5C 518.113,309.239 520.947,318.073 520.5,328C 520.527,345.296 513.527,358.963 499.5,369C 492.868,371.819 486.202,374.319 479.5,376.5C 458.438,379.405 439.772,374.238 423.5,361C 414.711,348.778 412.211,335.278 416,320.5C 424.547,300.953 439.047,288.12 459.5,282C 466.833,281.333 474.167,281.333 481.5,282C 488.78,284.641 495.78,287.808 502.5,291.5 Z"/>
          </g>

          {/* Right eyebrow outline */}
          <g transform="matrix(1, 0, 0, 1, -699.61, 13.83)">
            <path fill="#0c0b0c" d="M 1265.17 278.632 C 1270.56 284.222 1274.06 290.888 1275.67 298.632 C 1280.46 325.477 1269.96 342.977 1244.17 351.132 C 1232.84 351.799 1221.5 351.799 1210.17 351.132 C 1203.55 349.989 1197.22 347.989 1191.17 345.132 C 1185.24 339.208 1180.08 332.708 1175.67 325.632 C 1173.24 303.901 1180.08 285.734 1196.17 271.132 C 1200.65 268.809 1204.98 266.309 1209.17 263.632 C 1213.22 263.119 1217.22 262.286 1221.17 261.132 C 1225.5 260.465 1229.84 260.465 1234.17 261.132 C 1238.61 263.158 1243.27 264.658 1248.17 265.632 C 1253.8 268.597 1258.46 272.597 1262.17 277.632 C 1262.99 278.518 1263.99 278.851 1265.17 278.632 Z"/>
          </g>

          {/* Hand/Arm skin */}
          <g transform="matrix(1, 0, 0, 1, -97.72, 1.93)">
            <path fill="#f6c6a9" d="M 294.5,291.5 C 294.662,293.527 294.495,295.527 294,297.5C 291.591,299.309 290.591,301.642 291,304.5C 294.049,300.957 296.882,297.291 299.5,293.5C 301.223,291.747 302.723,289.747 304,287.5C 304.94,279.61 308.44,273.277 314.5,268.5C 315.117,268.611 315.617,268.944 316,269.5C 316.801,272.367 316.634,275.034 315.5,277.5C 315.663,275.143 315.497,272.81 315,270.5C 314.422,282.383 312.588,294.05 309.5,305.5C 307.828,311.731 307.328,318.065 308,324.5C 309.774,325.965 311.608,327.298 313.5,328.5C 317.959,331.787 322.292,335.287 326.5,339C 327.252,339.671 327.586,340.504 327.5,341.5C 323.025,349.107 318.525,356.773 314,364.5C 311.333,374.5 308.667,384.5 306,394.5C 305.667,394.833 305.333,395.167 305,395.5C 302.229,390.292 299.729,384.958 297.5,379.5C 294.224,369.67 291.557,359.67 289.5,349.5C 290.74,348.027 291.74,346.36 292.5,344.5C 292,344.167 291.5,343.833 291,343.5C 287.424,344.708 283.924,346.041 280.5,347.5C 276.167,347.5 271.833,347.5 267.5,347.5C 248.287,352.619 246.12,349.286 261,337.5C 262.379,333.525 261.213,330.691 257.5,329C 249.555,328.29 241.889,326.624 234.5,324C 233.313,322.981 232.313,321.814 231.5,320.5C 233.991,318.588 236.658,317.254 239.5,316.5C 245.026,316.821 250.36,316.488 255.5,315.5C 256.675,315.719 257.675,315.386 258.5,314.5C 257.192,311.536 255.192,309.203 252.5,307.5C 246.895,302.397 241.395,297.064 236,291.5C 235.503,288.854 235.336,286.187 235.5,283.5C 238.518,283.335 241.518,283.502 244.5,284C 252.302,288.237 260.302,291.903 268.5,295C 270.167,295.667 271.833,295.667 273.5,295C 274.617,291.927 274.784,288.76 274,285.5C 272.703,279.648 271.203,273.981 269.5,268.5C 268.42,265.257 268.253,261.924 269,258.5C 270.049,257.483 271.216,257.316 272.5,258C 281.46,268.083 288.793,279.249 294.5,291.5 Z"/>
          </g>

          {/* Left eye white - with blink */}
          <g transform="matrix(1, 0, 0, 1, -104.55, -7.17)">
            {blink ? (
              <ellipse cx="471.5" cy="326" rx="20" ry="3" fill="#0c0b0c"/>
            ) : (
              <path fill="#f7f7f7" d="M 471.5,308.5 C 492.662,310.133 497.829,320.133 487,338.5C 484.92,340.123 482.754,341.623 480.5,343C 473.582,344.551 466.582,344.884 459.5,344C 451.897,339.605 449.397,333.105 452,324.5C 456.604,316.645 463.104,311.312 471.5,308.5 Z"/>
            )}
          </g>

          {/* Right eye white - with blink */}
          <g transform="matrix(1, 0, 0, 1, -73.94, -6.3)">
            {blink ? (
              <ellipse cx="591.5" cy="326" rx="20" ry="3" fill="#0c0b0c"/>
            ) : (
              <path fill="#f8f8f8" d="M 591.5,310.5 C 609.379,307.879 617.212,315.545 615,333.5C 613.098,338.4 609.598,341.567 604.5,343C 594.99,346.488 586.823,344.655 580,337.5C 578.136,329.57 579.803,322.57 585,316.5C 587.664,315.002 589.83,313.002 591.5,310.5 Z"/>
            )}
          </g>

          {/* Animated Mouth */}
          {isTalking ? (
            <ellipse
              cx="384"
              cy={463 + mouthOpen/3}
              rx={15 + mouthOpen/2}
              ry={mouthOpen/2 + 3}
              fill="#4a1c1c"
              stroke="#2a1010"
              strokeWidth="2"
            />
          ) : null}

          {/* Tongue when mouth is wide open */}
          {isTalking && mouthOpen > 12 && (
            <ellipse
              cx="384"
              cy={468 + mouthOpen/3}
              rx="8"
              ry="4"
              fill="#e57373"
            />
          )}

          {/* Red Shirt */}
          <g transform="matrix(1.046, 0, 0, 1.127, -115.46, -67.74)">
            <path fill="#f70032" d="M 746.5,487.5 C 748.214,494.928 751.547,501.595 756.5,507.5C 756.5,508.833 756.5,510.167 756.5,511.5C 759.185,518.074 761.685,524.741 764,531.5C 764.667,533.167 764.667,534.833 764,536.5C 758.884,537.144 753.718,537.811 748.5,538.5C 741.261,541.453 734.261,544.953 727.5,549C 724.203,549.204 721.203,550.037 718.5,551.5C 717.041,551.433 715.708,551.766 714.5,552.5C 698.956,555.779 683.623,559.279 668.5,563C 667.68,553.244 667.18,543.41 667,533.5C 666.768,532.263 666.268,531.263 665.5,530.5C 664.833,530.167 664.167,529.833 663.5,529.5C 661.898,527.926 659.898,527.259 657.5,527.5C 656.167,527.5 654.833,527.5 653.5,527.5C 653.464,541.852 653.297,556.185 653,570.5C 654.667,572.833 656.333,575.167 658,577.5C 658.494,579.134 658.66,580.801 658.5,582.5C 661.961,583.111 664.628,581.944 666.5,579C 667.448,578.517 668.448,578.351 669.5,578.5C 669.36,576.876 670.027,575.71 671.5,575C 677.401,573.237 683.401,572.571 689.5,573C 690.893,574.171 691.727,575.671 692,577.5C 693.897,589.106 694.564,600.773 694,612.5C 693.095,618.742 690.095,623.742 685,627.5C 684.503,629.81 684.337,632.143 684.5,634.5C 665.838,632.41 647.171,632.243 628.5,634C 625.861,635.946 622.861,636.946 619.5,637C 612.956,643.608 605.289,645.441 596.5,642.5C 594.742,643.128 593.242,644.128 592,645.5C 591.383,646.449 591.549,647.282 592.5,648C 588.572,649.325 584.572,649.658 580.5,649C 576.392,646.279 572.059,644.113 567.5,642.5C 565.97,641.789 564.637,640.789 563.5,639.5C 563.056,637.887 562.056,636.72 560.5,636C 556.009,635.855 551.676,635.021 547.5,633.5C 541.732,634.423 536.065,635.756 530.5,637.5C 522.892,641.425 514.892,644.258 506.5,646C 500.881,647.299 495.214,647.632 489.5,647C 485.167,645.333 480.833,643.667 476.5,642C 475.36,640.027 474.027,638.193 472.5,636.5C 467.348,635.186 462.348,635.186 457.5,636.5C 451.437,638.299 445.437,640.299 439.5,642.5C 434.073,642.197 429.073,643.531 424.5,646.5C 422.055,645.035 420.055,645.535 418.5,648C 408.833,648.667 399.167,648.667 389.5,648C 384.494,647.9 381.661,645.4 381,640.5C 380.333,629.5 380.333,618.5 381,607.5C 383.159,598.252 384.992,588.918 386.5,579.5C 386.096,574.217 386.762,569.217 388.5,564.5C 391.842,557.312 394.842,549.979 397.5,542.5C 399.517,541.555 399.85,540.055 398.5,538C 400.105,529.746 402.105,521.58 404.5,513.5C 404.66,511.645 403.993,510.312 402.5,509.5C 397.241,510.016 394.908,513.016 395.5,518.5C 395.167,519.167 394.833,519.833 394.5,520.5C 392.732,522.508 391.066,524.674 389.5,527C 388.167,527.667 386.833,527.667 385.5,527C 384.743,525.488 383.743,524.154 382.5,523C 377.214,521.359 372.547,518.692 368.5,515C 366.109,514.713 363.776,514.213 361.5,513.5C 358.492,509.439 354.492,506.939 349.5,506C 344.167,502 338.833,498 333.5,494C 332.207,493.51 330.873,493.343 329.5,493.5C 327.84,491.678 326.84,489.511 326.5,487C 328.817,481.361 331.15,475.694 333.5,470C 334.5,469.333 335.5,469.333 336.5,470C 341.038,475.753 346.705,479.586 353.5,481.5C 357.189,488.012 362.856,490.845 370.5,490C 373.447,493.014 377.113,494.348 381.5,494C 390.219,497.597 399.219,499.763 408.5,500.5C 409.833,500.5 411.167,500.5 412.5,500.5C 414.598,501.935 416.931,503.102 419.5,504C 434.167,504.667 448.833,504.667 463.5,504C 477.612,500.221 491.945,497.554 506.5,496C 512.263,493.752 517.596,490.919 522.5,487.5C 523.765,486.521 525.099,485.521 526.5,484.5C 531.88,483.644 537.213,482.644 542.5,481.5C 548.874,480.816 555.208,479.816 561.5,478.5C 564.518,478.665 567.518,478.498 570.5,478C 579.139,474.193 587.805,470.693 596.5,467.5C 600.19,465.712 603.857,464.045 607.5,462.5C 612.72,461.893 617.72,460.559 622.5,458.5C 628.611,455.964 634.944,454.13 641.5,453C 644.5,450.667 647.5,448.333 650.5,446C 655.458,445.971 660.124,445.138 664.5,443.5C 666.196,443.315 667.529,442.481 668.5,441C 670.167,440.833 671.833,440.667 673.5,440.5C 679.684,442.22 686.017,443.22 692.5,443.5C 697.728,443.826 702.728,442.992 707.5,441C 715.5,440.333 723.5,440.333 731.5,441C 734.108,442.378 735.608,444.545 736,447.5C 736.361,454.199 737.028,460.865 738,467.5C 738.779,471.307 740.446,474.64 743,477.5C 743.333,479.833 743.667,482.167 744,484.5C 744.377,485.942 745.21,486.942 746.5,487.5 Z"/>
          </g>

          {/* Body/arm skin */}
          <g transform="matrix(1, 0, 0, 1, -88.57, -9.96)">
            <path fill="#f5c6aa" d="M 743.5,550.5 C 743.596,558.179 743.93,565.846 744.5,573.5C 744.666,579.842 744.5,586.175 744,592.5C 742.077,598.932 739.743,605.265 737,611.5C 736.505,613.473 736.338,615.473 736.5,617.5C 733.1,621.913 732.767,626.58 735.5,631.5C 740.862,646.904 736.195,658.07 721.5,665C 716.416,665.778 711.416,665.611 706.5,664.5C 703.325,664.16 701.159,662.493 700,659.5C 699.667,655.833 699.333,652.167 699,648.5C 698.586,648.043 698.086,647.709 697.5,647.5C 696.15,648.95 694.484,649.617 692.5,649.5C 692.277,647.658 691.943,645.825 691.5,644C 692.401,639.191 693.068,634.358 693.5,629.5C 695.91,628.611 698.41,627.945 701,627.5C 715.822,632.003 720.155,627.003 714,612.5C 710.615,608.783 707.615,604.783 705,600.5C 703.011,592.971 701.677,585.304 701,577.5C 700.283,576.956 699.783,576.289 699.5,575.5C 698.468,572.028 697.134,568.694 695.5,565.5C 695.709,564.914 696.043,564.414 696.5,564C 712.18,559.499 727.847,554.999 743.5,550.5 Z"/>
          </g>

          {/* Yellow Shorts */}
          <g transform="matrix(1, 0, 0, 1, -92.23, 8.34)">
            <path fill="#fcfd7e" d="M 671.5,642.5 C 671.881,643.931 672.881,644.764 674.5,645C 678.222,645.238 681.889,645.738 685.5,646.5C 690.659,652.803 694.826,659.803 698,667.5C 700.263,685.598 700.763,703.598 699.5,721.5C 697.856,721.714 696.356,721.38 695,720.5C 693.321,723.699 691.321,724.033 689,721.5C 686.834,723.121 684.334,723.955 681.5,724C 675.833,724.167 670.167,724.333 664.5,724.5C 638.004,723.511 611.504,723.511 585,724.5C 574.167,724.167 563.333,723.833 552.5,723.5C 551.754,722.264 551.421,720.93 551.5,719.5C 550.5,719.5 549.5,719.5 548.5,719.5C 548.073,712.608 546.407,705.941 543.5,699.5C 540.065,697.437 536.398,696.604 532.5,697C 531.253,698.494 531.253,699.994 532.5,701.5C 534.015,703.082 535.681,704.416 537.5,705.5C 537.33,710.859 536.83,716.192 536,721.5C 535.623,722.942 534.79,723.942 533.5,724.5C 532.167,724.5 530.833,724.5 529.5,724.5C 529.649,723.448 529.483,722.448 529,721.5C 527.881,722.552 527.381,723.719 527.5,725C 505.476,725.188 483.476,725.688 461.5,726.5C 434.543,726.582 407.543,726.415 380.5,726C 378.899,725.727 377.399,725.227 376,724.5C 375.503,721.854 375.336,719.187 375.5,716.5C 377.989,701.718 379.989,686.718 381.5,671.5C 382.799,670.91 383.632,669.91 384,668.5C 383.427,662.419 386.093,659.086 392,658.5C 401.481,659.573 410.981,659.739 420.5,659C 423.937,656.689 427.603,654.856 431.5,653.5C 431.414,652.504 431.748,651.671 432.5,651C 440.801,648.309 449.135,645.809 457.5,643.5C 465.985,644.713 473.652,647.713 480.5,652.5C 481.084,654.257 482.251,655.59 484,656.5C 492.85,659.061 501.683,658.895 510.5,656C 514.714,654.486 519.047,653.153 523.5,652C 525.377,649.894 527.71,648.561 530.5,648C 536.025,646.99 541.525,645.823 547,644.5C 551.893,646.363 556.726,648.363 561.5,650.5C 563.062,650.733 564.395,651.4 565.5,652.5C 567.973,654.143 569.973,656.31 571.5,659C 580.167,659.667 588.833,659.667 597.5,659C 602.364,657.482 607.03,655.648 611.5,653.5C 619.019,649.248 627.019,645.748 635.5,643C 647.495,642.5 659.495,642.333 671.5,642.5 Z"/>
          </g>

          {/* Left leg skin */}
          <g transform="matrix(1, 0, 0, 1, -81.25, 6.51)">
            <path fill="#f7c6a8" d="M 456.5,787.5 C 449.844,788.714 443.177,788.714 436.5,787.5C 435.185,785.684 433.685,784.017 432,782.5C 429.797,773.352 427.13,764.352 424,755.5C 423.349,749.173 422.849,742.84 422.5,736.5C 439.833,736.5 457.167,736.5 474.5,736.5C 474.77,740.85 474.103,745.017 472.5,749C 473.632,753.413 473.799,757.913 473,762.5C 471.915,767.437 471.248,772.437 471,777.5C 469.117,778.653 468.284,780.319 468.5,782.5C 464.11,783.323 460.11,784.99 456.5,787.5 Z"/>
          </g>

          {/* Right leg skin */}
          <g transform="matrix(1, 0, 0, 1, -86.74, 7.42)">
            <path fill="#f8c6a9" d="M 612.5,732.5 C 620.174,732.334 627.841,732.5 635.5,733C 642.579,734.149 649.746,734.982 657,735.5C 657.575,747.52 657.242,759.52 656,771.5C 654.956,774.71 652.79,776.71 649.5,777.5C 640.518,778.665 631.518,778.832 622.5,778C 620.667,776.167 618.833,774.333 617,772.5C 615.854,765.524 614.854,758.524 614,751.5C 611.318,745.791 609.485,739.791 608.5,733.5C 610.099,733.768 611.432,733.434 612.5,732.5 Z"/>
          </g>

          {/* Left sock */}
          <g transform="matrix(1, 0, 0, 1, -85.83, 9.25)">
            <path fill="#f8f8f8" d="M 618.5,783.5 C 629.147,784.784 639.814,784.784 650.5,783.5C 652.167,783.5 653.833,783.5 655.5,783.5C 656.332,791.805 656.665,800.138 656.5,808.5C 654.053,812.453 651.387,816.287 648.5,820C 643.12,820.596 637.787,820.262 632.5,819C 629.424,817.757 626.757,815.923 624.5,813.5C 622.973,807.436 621.14,801.436 619,795.5C 618.501,791.514 618.334,787.514 618.5,783.5 Z"/>
          </g>

          {/* Right sock */}
          <g transform="matrix(1, 0, 0, 1, -81.25, 6.51)">
            <path fill="#f9f9f9" d="M 470.5,786.5 C 472.446,791.396 473.113,796.729 472.5,802.5C 471.78,808.138 471.447,813.804 471.5,819.5C 465.421,821.038 459.421,822.871 453.5,825C 447.663,826.992 443.829,825.158 442,819.5C 439.83,812.815 437.663,806.148 435.5,799.5C 435.007,797.194 434.674,794.861 434.5,792.5C 440.006,794.376 445.672,794.876 451.5,794C 457.829,791.392 464.163,788.892 470.5,786.5 Z"/>
          </g>

          {/* Left shoe */}
          <g transform="matrix(1, 0, 0, 1, -84, 9.25)">
            <path fill="#f8d465" d="M 677.5,831.5 C 684.471,832.883 691.137,834.883 697.5,837.5C 699.428,839.113 701.762,840.113 704.5,840.5C 704.833,841.167 705.167,841.833 705.5,842.5C 704.813,844.177 704.146,845.844 703.5,847.5C 703.167,847.5 702.833,847.5 702.5,847.5C 702.631,846.624 702.298,845.957 701.5,845.5C 700.264,846.246 698.93,846.579 697.5,846.5C 697.5,845.5 697.5,844.5 697.5,843.5C 693.119,843.372 688.785,843.705 684.5,844.5C 683.833,844.5 683.5,844.167 683.5,843.5C 677.91,842.045 672.244,841.045 666.5,840.5C 665.737,839.732 664.737,839.232 663.5,839C 657.333,838.833 651.167,838.667 645,838.5C 634.339,838.569 623.839,839.069 613.5,840C 612.978,839.439 612.645,838.772 612.5,838C 613.632,836.235 614.632,834.402 615.5,832.5C 617.962,829.536 620.629,826.703 623.5,824C 628.467,824.161 633.467,824.328 638.5,824.5C 642.89,826.373 647.556,826.873 652.5,826C 655.5,822.333 658.5,818.667 661.5,815C 662.448,814.517 663.448,814.351 664.5,814.5C 664.334,818.514 664.501,822.514 665,826.5C 668.59,829.336 672.756,831.003 677.5,831.5 Z"/>
          </g>

          {/* Right shoe */}
          <g transform="matrix(1, 0, 0, 1, -81.25, 7.42)">
            <path fill="#f8d465" d="M 435.5,810.5 C 435.378,815.232 435.878,819.898 437,824.5C 437.197,826.861 438.364,828.528 440.5,829.5C 449.799,830.935 458.966,830.269 468,827.5C 469.107,827.585 470.107,827.919 471,828.5C 471.428,832.461 473.594,834.794 477.5,835.5C 477.5,836.833 477.5,838.167 477.5,839.5C 456.789,841.474 436.122,844.307 415.5,848C 411.429,851.025 406.762,852.359 401.5,852C 394.833,852.667 388.167,852.667 381.5,852C 380.978,851.439 380.645,850.772 380.5,850C 381.315,848.357 382.315,846.857 383.5,845.5C 392.623,842.385 401.957,839.885 411.5,838C 414.131,836.673 416.798,835.34 419.5,834C 420.582,832.67 421.249,831.17 421.5,829.5C 422.75,829.423 423.583,828.756 424,827.5C 424.527,820.966 426.527,814.966 430,809.5C 431.909,808.668 433.742,809.001 435.5,810.5 Z"/>
          </g>
        </svg>
      </div>

      {/* Status Indicators */}
      {isListening && !isTalking && isConnected && !isMuted && (
        <div className="absolute top-0 right-0 flex items-center gap-1.5 bg-green-500 text-white text-xs font-bold px-3 py-1.5 rounded-full shadow-lg">
          <span className="relative flex h-2 w-2">
            <span className="animate-ping absolute inline-flex h-full w-full rounded-full bg-white opacity-75"></span>
            <span className="relative inline-flex rounded-full h-2 w-2 bg-white"></span>
          </span>
          Listening...
        </div>
      )}

      {isMuted && isConnected && (
        <div className="absolute top-0 right-0 flex items-center gap-1 bg-amber-500 text-white text-xs font-bold px-3 py-1.5 rounded-full shadow-lg">
          ðŸ”‡ Muted
        </div>
      )}

      {isTalking && isConnected && (
        <div className="absolute top-0 right-0 flex items-center gap-1 bg-blue-500 text-white text-xs font-bold px-3 py-1.5 rounded-full shadow-lg animate-pulse">
          ðŸŽ¤ Speaking
        </div>
      )}
    </div>
  );
};

export default CartoonAvatar;
